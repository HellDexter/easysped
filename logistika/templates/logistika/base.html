{% load static %}
<!doctype html>
<html lang="cs">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}EasySped{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="{% static 'css/custom_layout.css' %}">
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header text-center">
            <a class="navbar-brand fs-4" href="/">EasySped</a>
            <div id="live-datetime"></div>
        </div>
        <div class="sidebar-body overflow-auto">
            <hr>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="/">Dashboard</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if '/prepravy' in request.path %}active{% endif %}" href="{% url 'seznam_preprav' %}">Přepravy</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if '/zakaznici' in request.path %}active{% endif %}" href="{% url 'seznam_zakazniku' %}">Zákazníci</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if '/dopravci' in request.path %}active{% endif %}" href="{% url 'seznam_dopravcu' %}">Dopravci</a>
                </li>
                <hr>
                <li class="nav-item">
                    <a class="nav-link" href="https://www.google.com/maps/dir/?dirflg=d" target="_blank">Plánovač tras (Google Maps)</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://dopravniinfo.gov.cz/" target="_blank">Dopravní info</a>
                </li>
            </ul>

            <div class="sidebar-holidays mt-3">
                <h6 class="text-white-50 text-uppercase small mb-2 text-center">
                    <a href="{% url 'seznam_svatku' %}" target="_blank" class="sidebar-holidays-link">Nejbližší svátky</a>
                </h6>
                <ul class="list-unstyled sidebar-holiday-list mb-0">
                    {% for holiday in upcoming_holidays %}
                        <li>
                            <span class="holiday-date">{{ holiday.date|date:"d.m." }}</span>
                            <span class="holiday-name" title="{{ holiday.name }}">{{ holiday.name|truncatechars:24 }}</span>
                            <span class="holiday-meta">{{ holiday.country_code }}{% if holiday.regions %} · {{ holiday.regions }}{% endif %}</span>
                        </li>
                    {% empty %}
                        <li class="text-white-50 small">Žádné svátky v dohledné době.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="calculator">
            <input type="text" class="calculator-screen" value="" disabled />
            <div class="calculator-keys">
                <button type="button" class="clear" value="all-clear" data-area="ac">AC</button>
                <button type="button" class="operator" value="%" data-area="percent">%</button>
                <button type="button" class="operator" value="/" data-area="divide">&divide;</button>
                <button type="button" class="operator" value="*" data-area="multiply">&times;</button>
                <button type="button" class="operator" value="-" data-area="subtract">-</button>

                <button type="button" value="7" data-area="seven">7</button>
                <button type="button" value="8" data-area="eight">8</button>
                <button type="button" value="9" data-area="nine">9</button>

                <button type="button" value="4" data-area="four">4</button>
                <button type="button" value="5" data-area="five">5</button>
                <button type="button" value="6" data-area="six">6</button>

                <button type="button" value="1" data-area="one">1</button>
                <button type="button" value="2" data-area="two">2</button>
                <button type="button" value="3" data-area="three">3</button>

                <button type="button" class="zero" value="0" data-area="zero">0</button>
                <button type="button" class="decimal" value="." data-area="decimal">.</button>
                
                <button type="button" class="operator" value="+" data-area="add">+</button>
                <button type="button" class="equal-sign operator" value="=" data-area="equals">=</button>
            </div>
        </div>
        <div class="sidebar-footer">
            {% if user.is_authenticated %}
                <div class="user-info">
                    <span class="username">Přihlášen: <strong>{{ user.username }}</strong></span>
                    <a href="{% url 'logout' %}" class="btn btn-sm btn-outline-light">Odhlásit</a>
                </div>
            {% endif %}
        </div>
        <!-- App owner & creator: Pavel Bertelmann -->
    </div>

    <main class="main-content container-fluid mt-4">
        {% if messages %}
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
        {% endif %}

        {% block content %}
        {% endblock %}
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script>
        flatpickr(".flatpickr-datetime", {
            enableTime: true,
            dateFormat: "Y-m-d H:i",
            time_24hr: true
        });
    </script>
</body>
</html>
